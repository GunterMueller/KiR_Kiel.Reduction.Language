<html>
<META NAME="ROBOTS" CONTENT="NONE">
<head>
<title>A Collection of Libraries for KiR</title>
</head>

<body>

<h1>A Collection of Libraries for KiR</h1>

We would like to build a central collection of libraries both to test our
approach to module systems and to make programming in KiR a little bit easier.
If you have written useful functions and programs in KiR and want to make 
them available, or if you have suggestion for other useful libraries/library
elements, please email me.
<p>

<ul>
<li><a href="#conventions">Conventions, Syntactic Sugar</a>
<li><a href="#libraries">Available Libraries</a>
</ul>

<hr>

<h2><a name="conventions">Conventions, Syntactic Sugar</a></h2>

Using frames and interactions for arbitrary expressions, there are several 
powerful ways to model <a href="../modules.html">modules in KiR</a>.
We are not yet sure about which approach is the best for our library
collection, but suggest the follwing conventions:
<p>

Each library has the form of a frame including at least the slots
<code>name, comment, author</code> and additional slots for the exported
items. To allow for the use of syntactical sugar, the names of the exported
items should be valid function identifiers. The libraries will be stored
both in internal editor format (lib/FILE.ed for use with $-variables)
and in internal graph format (lib/FILE.pre for use with !-variables).
In case of differences (hopefully not!), the .ed-version is the reference.
<p>

The .pre-version is generated by a simple program:
<pre>
sub [ File , Expr ]
in bind( fopen( File , 'w` ) , 
         case 
         when OK{Handle} guard true do bind( put( Handle , Expr ) , 
                                             sub [ Z ]
                                             in fclose( Handle ) ) ,
         when ERROR{Msg} guard true do ERROR{Msg}
         end )

</pre>

A simple form of import declaration has been introduced as syntactic sugar:
<pre>
def
  &from !LIST
   import [ Map, Fold ]
in Fold [ +, 0, Map [ sub [ X ] in ( X * X ), &lt; 1, 2, 3, 4, 5&gt; ] ]
</pre>
is a shorthand (you should never see the unique module identifiers which
are used internally) for:
<pre>
def
  &\001\002 [ ] =  !LIST
  Map [ ] = fselect( &\001\002, 'Map` )
  Fold [ ] = fselect( &\001\002, 'Fold` )
in Fold [ +, 0, Map [ sub [ X ] in ( X * X ), &lt; 1, 2, 3, 4, 5&gt; ] ]
</pre>

Please keep in mind that $-variables are replaced by program source text
whereas !-variables are replaced by preprocessed graphs and compiled code.
<p>

You may want to set (in red.init):
<pre>
Preprocessed-Extension is ".pre"
</pre>
and (in red.setup):
<pre>
 KiR_lib : lib/
</pre>
The lib/-directory should include soft-links to our standard libraries
(or modified copies of them if you prefer customized versions). If you
don't need to use own libraries, replace lib/ with the full path to a
standard library-directory (none available right now, but you may use
/home/base/public_html/ffi/edlib/). 
<p>

<hr>
<h2><a name="libraries">Available Libraries</a></h2>

As a start, here are some example libraries. You may download the ed-files
to your private edlib-directory. As a local user, you could also add softlinks to
the ed-files to your edlib (the latter approach has one advantage and one
disadvantage: you will always have the most recent version of the libraries;-).
Currently, the libraries are stored in 
<code>/home/base/public_html/ffi/edlib/</code>.
<p>

<dl>
<dt><a href="PARSE.pre">PARSE.pre</a> -- <a href="PARSE.ed">PARSE.ed</a>
<pre>
  name : LIB_parse
  comment : utilities for parsing
  author : cr 09.02.96
  exports : name, imports, comment, author, Infile, Alpha, Num, Alphanum, White, None, Nospace, Dropspace, Lit, Litp, Seq, Alt, Genlist, Test
</pre>

<dt><a href="LIST.pre">LIST.pre</a> -- <a href="LIST.ed">LIST.ed</a>
<pre>
  name : LIB_list
  comment : operations on lists
  author : cr 08.02.1996
  exports : name, comment, author, Empty, Nil, Cons, Head, Tail, Foldl, Unfoldl, Fold, Map, Filter, Append, Reverse, Take, Drop, Member, Flatten, Splitat
</pre>

<dt><a href="MONADIC.pre">MONADIC.pre</a> -- <a href="MONADIC.ed">MONADIC.ed</a>
<pre>
  name : LIB_monadic
  comment : library for monadic i/o
  author : cr, 22.01.96
  exports : name, comment, imports, author, Check, ERROR, Next, Then, Bindc, Bindn, Bindt, Putline, Ontty, Onfile, Getfile, Putfile, Dolist, Clear
</pre>

<dt><a href="STRING.pre">STRING.pre</a> -- <a href="STRING.ed">STRING.ed</a>
<pre>
  name : LIB_string
  comment : operations on strings
  author : cr 05.01.96
  exports : name, comment, author, Empty, Nil, Cons, Head, Tail, Foldl, Fold, Map, Filter, Append, Reverse, Take, Drop, Member, Flatten, Splitat
</pre>

<dt><a href="LAMBDA.pre">LAMBDA.pre</a> -- <a href="LAMBDA.ed">LAMBDA.ed</a>
<pre>
  name : lambda
  comment : lambda-calculus: numerals, booleans, pairs, Y-combinators
  author : cr 04.12.1995
  exports : name, comment, author, NumI, NumII, Y, Bool, Struct
</pre>

</dl>
<p>

<hr>

<address>
Tue Mar 19 18:38:59 MET 1996
</address>
</body>
</html>
